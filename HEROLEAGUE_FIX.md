# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –õ–∏–≥–∏ –ì–µ—Ä–æ–µ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –æ—Ç –õ–∏–≥–∏ –ì–µ—Ä–æ–µ–≤ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è" –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –∏ –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞.

## –ü—Ä–∏—á–∏–Ω–∞

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ `show_competition_detail` –≤ —Ñ–∞–π–ª–µ `upcoming_competitions_handlers.py` –æ–∂–∏–¥–∞–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `end_date` - –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –≤ –¥–∞–Ω–Ω—ã—Ö HeroLeague
- `distances` - –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –≤ –¥–∞–Ω–Ω—ã—Ö HeroLeague

–ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è –ø–æ–ª—É—á–∏—Ç—å `end_date` (—Å—Ç—Ä–æ–∫–∞ 532) –∏ –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫—É:
```python
end_date = datetime.fromisoformat(comp['end_date'].replace('Z', '+00:00'))
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω –ø–∞—Ä—Å–µ—Ä HeroLeague

**–§–∞–π–ª:** `competitions/heroleague_parser.py` (—Å—Ç—Ä–æ–∫–∏ 186-194)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
comp = {
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    "begin_date": start_time,
    "end_date": start_time,  # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º start_time –∫–∞–∫ end_date
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    "distances": [],  # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û: –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –¥–∏—Å—Ç–∞–Ω—Ü–∏–π
}
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –£ HeroLeague —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è –æ–±—ã—á–Ω–æ –æ–¥–Ω–æ–¥–Ω–µ–≤–Ω—ã–µ, –ø–æ—ç—Ç–æ–º—É `end_date = begin_date`
- –î–∏—Å—Ç–∞–Ω—Ü–∏–∏ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ API, –ø–æ—ç—Ç–æ–º—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
- –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `distances_text`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ—Ç–∞–ª–µ–π —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `upcoming_competitions_handlers.py` (—Å—Ç—Ä–æ–∫–∏ 549-566)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –î–∏—Å—Ç–∞–Ω—Ü–∏–∏
if comp.get('distances'):
    # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ (RussiaRunning, Timerman)
    from utils.unit_converter import safe_convert_distance_name
    text += f"\n<b>üìè –î–∏—Å—Ç–∞–Ω—Ü–∏–∏:</b>\n"
    for dist in comp['distances'][:10]:
        converted_name = safe_convert_distance_name(distance_name, distance_unit)
        text += f"  ‚Ä¢ {converted_name}\n"
elif comp.get('distances_text'):
    # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û: –î–ª—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏–π (HeroLeague)
    text += f"\n<b>üìè –î–∏—Å—Ç–∞–Ω—Ü–∏–∏:</b>\n{comp['distances_text']}\n"

if comp.get('url'):  # ‚Üê –ò–ó–ú–ï–ù–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω .get() –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    text += f"\nüîó <a href=\"{comp['url']}\">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ</a>"
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `.get()` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ `elif` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–π
- –¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è HeroLeague

```json
{
  "id": "skirun2025_msc",
  "title": "–õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞",
  "city": "–ú–æ—Å–∫–≤–∞",
  "place": "–ú–æ—Å–∫–≤–∞, –ö–°–ö –ë–∏—Ç—Ü–∞",
  "begin_date": "2025-02-16T07:00:00",
  "end_date": "2025-02-16T07:00:00",          ‚Üê –¥–æ–±–∞–≤–ª–µ–Ω–æ
  "formatted_date": "16.02.2025",
  "distances": [],                              ‚Üê –¥–æ–±–∞–≤–ª–µ–Ω–æ
  "distances_text": "–õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ 1 –∫–º., ..."  ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
}
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –±–æ—Ç–µ

```
üèÜ –õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

üìÖ –î–∞—Ç–∞: 16.02.2025
üìç –ú–µ—Å—Ç–æ: –ú–æ—Å–∫–≤–∞, –ö–°–ö –ë–∏—Ç—Ü–∞
üèÉ –í–∏–¥ —Å–ø–æ—Ä—Ç–∞: –õ—ã–∂–∏

üìè –î–∏—Å—Ç–∞–Ω—Ü–∏–∏:
–õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ 1 –∫–º., –õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ 5 –∫–º., –õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞ 10 –∫–º, –≠—Å—Ç–∞—Ñ–µ—Ç–∞

üîó –ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ

[‚úÖ –Ø —É—á–∞—Å—Ç–≤—É—é]
[‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **test_heroleague_structure.py** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - ‚úÖ `end_date` –∏ `distances` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

2. **test_heroleague_bot_integration.py** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
   - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π HeroLeague
   - ‚úÖ –°–º–µ—à–∏–≤–∞–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
   - ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ–ª–µ–π

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
‚úÖ PASSED: –ü–æ–ª—É—á–µ–Ω–∏–µ HeroLeague
‚úÖ PASSED: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤–º–µ—Å—Ç–µ
‚úÖ PASSED: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ–ª–µ–π

–ü—Ä–æ–π–¥–µ–Ω–æ: 3/3
üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!
```

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `competitions/heroleague_parser.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã `end_date` –∏ `distances`
2. ‚úÖ `competitions/upcoming_competitions_handlers.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `distances_text`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

```bash
python -m py_compile competitions/heroleague_parser.py
python -m py_compile competitions/upcoming_competitions_handlers.py
```

‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, –±–µ–∑ –æ—à–∏–±–æ–∫

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è **–æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã**:
- RussiaRunning: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏)
- Timerman: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏)
- HeroLeague: —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏)

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ HeroLeague

- **–î–∏—Å—Ç–∞–Ω—Ü–∏–∏**: –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- **–î–∞—Ç—ã**: –û–¥–Ω–æ–¥–Ω–µ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (`begin_date = end_date`)
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –Ω–æ –±–µ–∑ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –ü–∞—Ä—Å–∏–Ω–≥ –¥–∏—Å—Ç–∞–Ω—Ü–∏–π –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏
2. –ü–æ–∏—Å–∫ API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏–π
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã
