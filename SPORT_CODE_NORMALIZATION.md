# –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è sport_code –¥–ª—è HeroLeague

## –ü—Ä–æ–±–ª–µ–º–∞

–ú–∞—Ä–∞—Ñ–æ–Ω "–î–æ—Ä–æ–≥–∞ –∂–∏–∑–Ω–∏" –∏ –¥—Ä—É–≥–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è –æ—Ç –õ–∏–≥–∏ –ì–µ—Ä–æ–µ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞:
- `doroga` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∫–∞–∫ "doroga"
- `gonka` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∫–∞–∫ "gonka"
- `zabeg` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∫–∞–∫ "zabeg"
- `arcticmarathon` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∫–∞–∫ "arcticmarathon"
- `skirun` ‚Üí –º–æ–≥ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–í–º–µ—Å—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π: "–ë–µ–≥", "–õ—ã–∂–∏", "–í–µ–ª–æ—Å–ø–æ—Ä—Ç" –∏ —Ç.–¥.

## –ü—Ä–∏—á–∏–Ω–∞

API HeroLeague –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–¥—ã —Å–æ–±—ã—Ç–∏–π (`doroga`, `gonka`, `zabeg`), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–¥–∞–º —Å–ø–æ—Ä—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –≤ –±–æ—Ç–µ (`run`, `ski`, `bike`).

–°–ª–æ–≤–∞—Ä—å `SPORT_NAMES` –≤ `parser.py` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞–ø–ø–∏–Ω–≥–∞ –¥–ª—è —ç—Ç–∏—Ö –∫–æ–¥–æ–≤:
```python
SPORT_NAMES = {
    "run": "–ë–µ–≥",
    "swim": "–ü–ª–∞–≤–∞–Ω–∏–µ",
    "bike": "–í–µ–ª–æ—Å–ø–æ—Ä—Ç",
    "all": "–í—Å–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞",
}
```

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ `sport_code` –≤ –ø–∞—Ä—Å–µ—Ä–µ HeroLeague, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–¥—ã API –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–¥–∞–º —Å–ø–æ—Ä—Ç–∞.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `competitions/heroleague_parser.py`

**1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `normalize_sport_code()`** (—Å—Ç—Ä–æ–∫–∏ 18-43):

```python
def normalize_sport_code(event_type_id: str) -> str:
    """
    –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç sport_code –æ—Ç HeroLeague –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–¥–∞–º

    Args:
        event_type_id: ID —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "gonka", "zabeg", "skirun")

    Returns:
        str: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–¥ —Å–ø–æ—Ä—Ç–∞ ("run", "ski", "bike", "swim", "triathlon")
    """
    event_type_lower = event_type_id.lower()

    # –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª—ã–∂–∏ –†–ê–ù–¨–®–ï, —á–µ–º –±–µ–≥, —Ç–∞–∫ –∫–∞–∫ "skirun" —Å–æ–¥–µ—Ä–∂–∏—Ç "run"
    # –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π HeroLeague –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã
    if any(keyword in event_type_lower for keyword in ["skirun", "snowrun", "ski", "–ª—ã–∂"]):
        return "ski"
    elif any(keyword in event_type_lower for keyword in ["gonka", "zabeg", "race", "run", "marathon", "doroga", "arctic"]):
        return "run"
    elif any(keyword in event_type_lower for keyword in ["bike", "–≤–µ–ª–æ—Å"]):
        return "bike"
    elif any(keyword in event_type_lower for keyword in ["swim", "–ø–ª–∞–≤"]):
        return "swim"
    elif any(keyword in event_type_lower for keyword in ["triathlon", "—Ç—Ä–∏–∞—Ç–ª–æ–Ω"]):
        return "triathlon"
    else:
        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥
        return event_type_id
```

**2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `matches_sport_type()`** (—Å—Ç—Ä–æ–∫–∏ 46-64):

```python
def matches_sport_type(event_type_id: str, sport: Optional[str]) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å–ø–æ—Ä—Ç—É
    """
    if not sport or sport == "all":
        return True

    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ–¥ —Å–ø–æ—Ä—Ç–∞
    normalized_code = normalize_sport_code(event_type_id)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
    return normalized_code == sport
```

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ `parse_competition()`** (—Å—Ç—Ä–æ–∫–∏ 195-205):

```python
# –ü–æ–ª—É—á–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π sport_code –∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –µ–≥–æ
original_sport_code = event.get("event_type", {}).get("public_id", "run")
normalized_sport_code = normalize_sport_code(original_sport_code)

comp = {
    # ...
    "sport_code": normalized_sport_code,  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
    # ...
}
```

## –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–¥–æ–≤

| –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ HeroLeague | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ |
|----------------------------|---------------------|-----------------|
| `gonka` | `run` | –ë–µ–≥ |
| `gonka_zima` | `run` | –ë–µ–≥ |
| `zabeg` | `run` | –ë–µ–≥ |
| `doroga` | `run` | –ë–µ–≥ |
| `arcticmarathon` | `run` | –ë–µ–≥ |
| `marathon` | `run` | –ë–µ–≥ |
| `skirun` | `ski` | –õ—ã–∂–∏ |
| `snowrun` | `ski` | –õ—ã–∂–∏ |
| `bike` | `bike` | –í–µ–ª–æ—Å–ø–æ—Ä—Ç |
| `swim` | `swim` | –ü–ª–∞–≤–∞–Ω–∏–µ |
| `triathlon` | `triathlon` | –¢—Ä–∏–∞—Ç–ª–æ–Ω |
| `camp` | `camp` | camp (–Ω–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ) |

## –í–∞–∂–Ω–∞—è –¥–µ—Ç–∞–ª—å

‚ö†Ô∏è **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ!**

–õ—ã–∂–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –†–ê–ù–¨–®–ï, —á–µ–º –±–µ–≥, –ø–æ—Ç–æ–º—É —á—Ç–æ `skirun` –∏ `snowrun` —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ª–æ–≤–æ `run`:

```python
# –ü–†–ê–í–ò–õ–¨–ù–û: skirun ‚Üí ski
if any(keyword in event_type_lower for keyword in ["skirun", "snowrun", "ski", "–ª—ã–∂"]):
    return "ski"
elif any(keyword in event_type_lower for keyword in ["gonka", "zabeg", "race", "run", ...]):
    return "run"

# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: skirun ‚Üí run (–æ—à–∏–±–∫–∞!)
if any(keyword in event_type_lower for keyword in ["gonka", "zabeg", "race", "run", ...]):
    return "run"
elif any(keyword in event_type_lower for keyword in ["skirun", "snowrun", "ski", "–ª—ã–∂"]):
    return "ski"
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
üèÜ –ó–∏–º–Ω–∏–π –º–∞—Ä–∞—Ñ–æ–Ω ¬´–î–æ—Ä–æ–≥–∞ –∂–∏–∑–Ω–∏¬ª

üìÖ –î–∞—Ç–∞: 25.01.2026
üìç –ú–µ—Å—Ç–æ: –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
üèÉ –í–∏–¥ —Å–ø–æ—Ä—Ç–∞: doroga  ‚Üê –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

üìè –î–∏—Å—Ç–∞–Ω—Ü–∏–∏:
57 —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ª–µ–≥–∫–æ–∞—Ç–ª–µ—Ç–∏—á–µ—Å–∫–∏–π –∑–∏–º–Ω–∏–π –º–∞—Ä–∞—Ñ–æ–Ω...
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
üèÜ –ó–∏–º–Ω–∏–π –º–∞—Ä–∞—Ñ–æ–Ω ¬´–î–æ—Ä–æ–≥–∞ –∂–∏–∑–Ω–∏¬ª

üìÖ –î–∞—Ç–∞: 25.01.2026
üìç –ú–µ—Å—Ç–æ: –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
üèÉ –í–∏–¥ —Å–ø–æ—Ä—Ç–∞: –ë–µ–≥  ‚Üê ‚úÖ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

üìè –î–∏—Å—Ç–∞–Ω—Ü–∏–∏:
57 —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ª–µ–≥–∫–æ–∞—Ç–ª–µ—Ç–∏—á–µ—Å–∫–∏–π –∑–∏–º–Ω–∏–π –º–∞—Ä–∞—Ñ–æ–Ω...
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

–ò–∑ 68 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π HeroLeague:
- **–ë–µ–≥ (run)**: 55 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
  - –ì–æ–Ω–∫–∞ –ì–µ—Ä–æ–µ–≤
  - –ó–∞–±–µ–≥.–†–§
  - –ú–∞—Ä–∞—Ñ–æ–Ω ¬´–î–æ—Ä–æ–≥–∞ –∂–∏–∑–Ω–∏¬ª
  - –ê—Ä–∫—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä–∞—Ñ–æ–Ω
- **–õ—ã–∂–∏ (ski)**: 3 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è
  - –õ—ã–∂–Ω–∞—è –≥–æ–Ω–∫–∞
  - –°–Ω–µ–∂–Ω—ã–π –≤—ã–∑–æ–≤
- **–õ–∞–≥–µ—Ä—è (camp)**: 10 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
  - –õ–∏–≥–∞ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (–Ω–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **test_sport_code_normalization.py** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –º–∞–ø–ø–∏–Ω–≥–æ–≤
   - ‚úÖ 12/12 –∫–æ–¥–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –í—Å–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã

2. **test_doroga_display.py** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Ä–∞—Ñ–æ–Ω–∞
   - ‚úÖ sport_code –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω: `doroga` ‚Üí `run`
   - ‚úÖ –í–∏–¥ —Å–ø–æ—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è: "–ë–µ–≥"
   - ‚úÖ –î–∏—Å—Ç–∞–Ω—Ü–∏–∏ –∏–∑ `distances_text` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ sport_code:
  camp: 10 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
  run: 55 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
  ski: 3 —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã**:
- RussiaRunning: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- Timerman: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- HeroLeague: –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è ‚Üí —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –§–∞–π–ª—ã

–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `competitions/heroleague_parser.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è sport_code

–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `test_sport_code_normalization.py` - —Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- `test_doroga_display.py` - —Ç–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Ä–∞—Ñ–æ–Ω–∞
- `check_doroga_marathon.py` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
