# ‚úÖ –ò–°–¢–ò–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ê!

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã (–ø–æ –ª–æ–≥–∞–º):

–í–∞—à–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑–∞–ª–∏:
```
INFO: save_and_finish: data from state = {'quick_input': 'sleep', 'sleep_duration': 8.0, 'sleep_quality': 4}
```

State —Å–æ–¥–µ—Ä–∂–∞–ª **–¢–û–õ–¨–ö–û –¥–∞–Ω–Ω—ã–µ –æ —Å–Ω–µ**. –ü—É–ª—å—Å –∏ –≤–µ—Å –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏!

## üêõ –ì–¥–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞:

–Ø –Ω–∞—à–µ–ª **–î–í–ê –º–µ—Å—Ç–∞** –≥–¥–µ –æ—á–∏—â–∞–ª—Å—è state:

### 1. –í —Ñ—É–Ω–∫—Ü–∏–∏ `save_and_finish()` (—Å—Ç—Ä–æ–∫–∞ 462)
–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è–ª—Å—è:
```python
await state.clear()  # ‚ùå –£–¥–∞–ª—è–ª –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```

### 2. –í —Ñ—É–Ω–∫—Ü–∏–∏ `health_menu_callback()` (—Å—Ç—Ä–æ–∫–∞ 65)
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–ª "üîô –ù–∞–∑–∞–¥":
```python
await state.clear()  # ‚ùå –£–¥–∞–ª—è–ª –≤—Å–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª `state.clear()` –≤ `save_and_finish()`
–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è state –ù–ï –æ—á–∏—â–∞–µ—Ç—Å—è - –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–≤–æ–¥–æ–≤.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ó–∞–º–µ–Ω–∏–ª `state.clear()` –Ω–∞ `state.set_state(None)` –≤ `health_menu_callback()`
–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥":
- –û—á–∏—â–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (—á—Ç–æ–±—ã –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞)
- **–î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è** –≤ state (–ø—É–ª—å—Å, –≤–µ—Å, —Å–æ–Ω)

## üìä –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –®–∞–≥ 1: –í–≤–æ–¥–∏–º –ø—É–ª—å—Å 65
```
State: {'pulse': 65, 'quick_input': 'pulse'}
–ë–î: pulse=65
```
–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Üí State –ù–ï –æ—á–∏—â–∞–µ—Ç—Å—è!

### –®–∞–≥ 2: –ù–∞–∂–∏–º–∞–µ–º "–ù–∞–∑–∞–¥", –∑–∞—Ç–µ–º –≤–≤–æ–¥–∏–º –≤–µ—Å 72
```
State: {'pulse': 65, 'weight': 72, 'quick_input': 'weight'}  ‚Üê –ü—É–ª—å—Å —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è!
–ë–î: pulse=65, weight=72
```

### –®–∞–≥ 3: –ù–∞–∂–∏–º–∞–µ–º "–ù–∞–∑–∞–¥", –∑–∞—Ç–µ–º –≤–≤–æ–¥–∏–º —Å–æ–Ω 8
```
State: {'pulse': 65, 'weight': 72, 'sleep_duration': 8.0, 'sleep_quality': 4}
–ë–î: pulse=65, weight=72, sleep=8.0, quality=4
```

‚úÖ **–í—Å–µ —Ç—Ä–∏ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ state –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î!**

## üß™ –ü–†–û–¢–ï–°–¢–ò–†–£–ô–¢–ï –°–ï–ô–ß–ê–°:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
2. –û—Ç–∫—Ä–æ–π—Ç–µ "‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ" ‚Üí "üìù –í–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ"
3. –í–≤–µ–¥–∏—Ç–µ **–ø—É–ª—å—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 65)
4. –ù–∞–∂–º–∏—Ç–µ "üîô –ù–∞–∑–∞–¥"
5. –í–≤–µ–¥–∏—Ç–µ **–≤–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 72)
6. –ù–∞–∂–º–∏—Ç–µ "üîô –ù–∞–∑–∞–¥"
7. –í–≤–µ–¥–∏—Ç–µ **—Å–æ–Ω** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 8)

## üìù –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:

### –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–µ—Å–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
INFO: save_and_finish: data from state = {'pulse': 65, 'weight': 72, ...}
                                          ^^^^^^^^^^^^  ‚Üê –ü—É–ª—å—Å –ï–°–¢–¨!
```

### –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–Ω–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
INFO: save_and_finish: data from state = {'pulse': 65, 'weight': 72, 'sleep_duration': 8.0, ...}
                                          ^^^^^^^^^^^^  ^^^^^^^^^^^^  ‚Üê –û–ë–ê –ï–°–¢–¨!
```

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. ‚ùå –£–±—Ä–∞–ª `state.clear()` –∏–∑ –Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤–≤–æ–¥–∞ (pulse, weight, sleep)
2. ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª `state.clear()` –≤ –∫–æ–Ω—Ü–µ `save_and_finish()`
3. ‚úÖ –ó–∞–º–µ–Ω–∏–ª `state.clear()` –Ω–∞ `state.set_state(None)` –≤ `health_menu_callback()`

**–¢–µ–ø–µ—Ä—å state –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ù–ï –æ—á–∏—â–∞–µ—Ç—Å—è –º–µ–∂–¥—É –≤–≤–æ–¥–∞–º–∏!**

---

**–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏ –ø—Ä–∏—à–ª–∏—Ç–µ –ª–æ–≥–∏!** üöÄ
