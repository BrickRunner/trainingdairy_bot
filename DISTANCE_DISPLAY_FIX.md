# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–π –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è"

## –î–∞—Ç–∞: 2025-12-19

## –ü—Ä–æ–±–ª–µ–º–∞

–í–æ –º–Ω–æ–≥–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è" –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å –¥–∏—Å—Ç–∞–Ω—Ü–∏—è. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –¥–ª—è —Å–æ–±—ã—Ç–∏–π –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (HeroLeague –∏ reg.place).

### –ü—Ä–∏–º–µ—Ä:
```
1. –ú–∞—Ä–∞—Ñ–æ–Ω –≤ –ú–æ—Å–∫–≤–µ
   üìè –ù–µ —É–∫–∞–∑–∞–Ω–∞          ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
   üìÖ 25.01.2026 (—á–µ—Ä–µ–∑ 37 –¥–Ω–µ–π)
   üéØ –¶–µ–ª—å: 03:30:00
```

–í–º–µ—Å—Ç–æ "–ù–µ —É–∫–∞–∑–∞–Ω–∞" –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è "42.2 –∫–º" –∏–ª–∏ "–ú–∞—Ä–∞—Ñ–æ–Ω" (—Ç–æ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª).

## –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `show_my_competitions()` –±—ã–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `distance_name`:

1. –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–ª–∞ `distance_name` –∏–∑ –ë–î (–≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–≤–µ–¥–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–∏—Å—Ç–∞–Ω—Ü–∏—è)
2. –ü—Ä–æ–≤–µ—Ä—è–ª–∞ `if not distance_name` - –Ω–æ —ç—Ç–æ –¥–∞–≤–∞–ª–æ `False` –¥–ª—è –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ `""`
3. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —Å—á–∏—Ç–∞–ª–∞—Å—å "–Ω–∞–π–¥–µ–Ω–Ω–æ–π" –∏ –Ω–µ –∏—Å–∫–∞–ª–∞—Å—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
4. –ó–∞—Ç–µ–º –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ `if distance_name and distance_name.strip()` —ç—Ç–æ –¥–∞–≤–∞–ª–æ `False`
5. –ü–µ—Ä–µ—Ö–æ–¥–∏–ª–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `distance_value` (–∫–æ—Ç–æ—Ä–æ–µ –±—ã–ª–æ 0)
6. –í –∏—Ç–æ–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å "–ù–µ —É–∫–∞–∑–∞–Ω–∞"

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:**
```python
distance_name = comp.get('distance_name')  # –ú–æ–∂–µ—Ç –±—ã—Ç—å "", None, –∏–ª–∏ "10 –∫–º"

# –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –¥–ª—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ ""
if not distance_name and comp.get('distances'):
    # –ü–æ–∏—Å–∫ –≤ –º–∞—Å—Å–∏–≤–µ distances
    ...

if distance_name:  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ "" –¥–∞–≤–∞–ª–∞ False
    dist_str = safe_convert_distance_name(distance_name, distance_unit)
elif distance_value > 0:
    dist_str = await format_dist_with_units(distance_value, user_id)
else:
    dist_str = "–ù–µ —É–∫–∞–∑–∞–Ω–∞"  # ‚Üê –°—é–¥–∞ –ø–æ–ø–∞–¥–∞–ª–æ
```

## –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫:

**–§–∞–π–ª:** `competitions/competitions_handlers.py` (—Å—Ç—Ä–æ–∫–∏ 507-541)

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è distance_name (—Å—Ç—Ä–æ–∫–∞ 508)

**–ë—ã–ª–æ:**
```python
if not distance_name and comp.get('distances'):
```

**–°—Ç–∞–ª–æ:**
```python
if (not distance_name or not distance_name.strip()) and comp.get('distances'):
```

–¢–µ–ø–µ—Ä—å –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ distance_name (—Å—Ç—Ä–æ–∫–∞ 525)

**–ë—ã–ª–æ:**
```python
if distance_name:
```

**–°—Ç–∞–ª–æ:**
```python
if distance_name and distance_name.strip():
```

–Ø–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø—É—Å—Ç–∞—è.

### –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 505, 533, 537, 541)

–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```python
logger.debug(f"Competition '{comp.get('name')}': distance_value={distance_value}, distance_name='{distance_name}', service={comp.get('service')}")

# ... –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ case
logger.debug(f"  Using distance_name: '{distance_name}' -> '{dist_str}'")
logger.debug(f"  Using distance_value: {distance_value} -> '{dist_str}'")
logger.warning(f"  No distance found for competition '{comp.get('name')}' ...")
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –í–°–ï–• —Ç–∏–ø–æ–≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π:

### RussiaRunning, Timerman (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏):
```
1. –ú–∞—Ä–∞—Ñ–æ–Ω –≤ –ú–æ—Å–∫–≤–µ
   üìè 42.2 –∫–º          ‚Üê –ò–∑ –º–∞—Å—Å–∏–≤–∞ distances
   üìÖ 25.01.2026
   üéØ –¶–µ–ª—å: 03:30:00
```

### HeroLeague, reg.place (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥):
```
2. –ó–∞–±–µ–≥ –≤ –ü–∞—Ä–∫–µ
   üìè 10 –∫–º            ‚Üê –ò–∑ distance_name (–≤–≤–µ–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
   üìÖ 15.02.2026
   üéØ –¶–µ–ª—å: 00:55:00

3. –¢—Ä–∏–∞—Ç–ª–æ–Ω –≤ –°–æ—á–∏
   üìè –°–ø—Ä–∏–Ω—Ç          ‚Üê –ò–∑ distance_name (–≤–≤–µ–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
   üìÖ 20.03.2026
   üéØ –¶–µ–ª—å: 01:45:00
```

## –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∏—Å—Ç–∞–Ω—Ü–∏–π

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ–º `distance_name` –∏–∑ –ë–î:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –∏ –Ω–µ –ø—É—Å—Ç–∞—è ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å —É—á–µ—Ç–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–º/–º–∏–ª—å)

2. **–ï—Å–ª–∏ `distance_name` –ø—É—Å—Ç–∞—è –∏–ª–∏ None ‚Üí –∏—â–µ–º –≤ –º–∞—Å—Å–∏–≤–µ `distances`:**
   - –ò—â–µ–º –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é `distance_value`
   - –ë–µ—Ä–µ–º –µ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ

3. **–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `distance_value`:**
   - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è

4. **–ï—Å–ª–∏ –∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–ù–µ —É–∫–∞–∑–∞–Ω–∞"**

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **`competitions/competitions_handlers.py`** (—Å—Ç—Ä–æ–∫–∏ 507-541)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `distance_name` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ HeroLeague –∏–ª–∏ reg.place
2. –í–≤–µ–¥–∏—Ç–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: "10 –∫–º", "–ú–∞—Ä–∞—Ñ–æ–Ω", "–°–ø—Ä–∏–Ω—Ç")
3. –í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª "‚úÖ –ú–æ–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è"
5. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–Ω–µ "–ù–µ —É–∫–∞–∑–∞–Ω–∞")

---

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**
