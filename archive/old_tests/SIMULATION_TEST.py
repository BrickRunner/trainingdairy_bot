"""
Ğ¡Ğ˜ĞœĞ£Ğ›Ğ¯Ğ¦Ğ˜Ğ¯: Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾Ğ¹Ğ´ĞµÑ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
"""

print("=" * 80)
print("Ğ¡Ğ˜ĞœĞ£Ğ›Ğ¯Ğ¦Ğ˜Ğ¯ Ğ”ĞĞ‘ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯ Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ Ğ¡ĞĞ Ğ•Ğ’ĞĞĞ’ĞĞĞ˜Ğ¯")
print("=" * 80)

print("\n[Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ™]")
print("ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±Ğ¾Ñ‚Ğ° -> Ğ¡Ğ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ -> ĞœĞ¾Ğ¸ ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ")
print("ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ĞŸĞ ĞĞ¨Ğ•Ğ”Ğ¨Ğ•Ğ• ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ¾Ñ‚ 2024-10-15)")
print()

print("=" * 80)
print("Ğ¨ĞĞ“ 1: ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞšĞĞĞŸĞšĞ˜")
print("=" * 80)

print("""
Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ¯: view_my_competition() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 546-615)

Ğ›ĞĞ“Ğ˜ĞšĞ:
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ñ‚Ñƒ ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ· Ğ‘Ğ”
2. Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ´Ğ°Ñ‚Ğ¾Ğ¹
3. Ğ•ÑĞ»Ğ¸ ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞŸĞ ĞĞ¨Ğ›Ğ Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° ĞĞ•Ğ¢:
   -> ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "ğŸ† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚"

ĞšĞĞ” (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 552-569):
    comp_date = datetime.strptime(competition['date'], '%Y-%m-%d').date()
    today = datetime.now().date()
    is_finished = comp_date < today

    has_result = registration.get('finish_time') is not None

    if is_finished:
        if not has_result:
            builder.row(
                InlineKeyboardButton(
                    text="ğŸ† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚",
                    callback_data=f"comp:add_result:{competition_id}"
                )
            )

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "ğŸ† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚"
""")

print("=" * 80)
print("Ğ¨ĞĞ“ 2: ĞĞĞ–ĞĞ¢Ğ˜Ğ• ĞĞ ĞšĞĞĞŸĞšĞ£")
print("=" * 80)

print("""
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚"

CALLBACK: comp:add_result:{competition_id}

ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš: start_add_result() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 828-860)

Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯:
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ID ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ· callback
2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ² FSM state
3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
4. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: waiting_for_finish_time

Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ• Ğ‘ĞĞ¢Ğ£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† ĞœĞ°Ñ€Ğ°Ñ„Ğ¾Ğ½ "Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ğ°Ñ Ğ¾ÑĞµĞ½ÑŒ"                 â”‚
â”‚                                             â”‚
â”‚ Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµ Ñ„Ğ¸Ğ½Ğ¸ÑˆĞ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ      â”‚
â”‚ Ğ§Ğ§:ĞœĞœ:Ğ¡Ğ¡ Ğ¸Ğ»Ğ¸ ĞœĞœ:Ğ¡Ğ¡                         â”‚
â”‚ ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞ¾Ñ‚Ñ‹Ğµ: Ğ§Ğ§:ĞœĞœ:Ğ¡Ğ¡.ÑÑ           â”‚
â”‚                                             â”‚
â”‚ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:                                    â”‚
â”‚ â€¢ 1:23:45.50                                â”‚
â”‚ â€¢ 42:30.25                                  â”‚
â”‚ â€¢ 1:23:45                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°]

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
""")

print("=" * 80)
print("Ğ¨ĞĞ“ 3: Ğ’Ğ’ĞĞ” Ğ’Ğ Ğ•ĞœĞ•ĞĞ˜")
print("=" * 80)

print("""
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ "1:23:45.50"

Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• FSM: waiting_for_finish_time

ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš: process_finish_time() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 863-897)

Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯:
1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
2. ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (00:40:30 -> 40:30)
3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² FSM state
4. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¼ĞµÑÑ‚Ğ° Ğ² Ğ¾Ğ±Ñ‰ĞµĞ¼ Ğ·Ğ°Ñ‡Ñ‘Ñ‚Ğµ
5. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: waiting_for_place_overall

Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ• Ğ‘ĞĞ¢Ğ£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµ Ğ¼ĞµÑÑ‚Ğ¾ Ğ² Ğ¾Ğ±Ñ‰ĞµĞ¼ Ğ·Ğ°Ñ‡Ñ‘Ñ‚Ğµ (Ñ‡Ğ¸ÑĞ»Ğ¾)  â”‚
â”‚ Ğ˜Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ" ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ    â”‚
â”‚ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [â­ï¸ ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ]  [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°]

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ¼ĞµÑÑ‚Ğ° Ğ² Ğ¾Ğ±Ñ‰ĞµĞ¼ Ğ·Ğ°Ñ‡Ñ‘Ñ‚Ğµ
""")

print("=" * 80)
print("Ğ¨ĞĞ“ 4: Ğ’Ğ’ĞĞ” ĞœĞ•Ğ¡Ğ¢Ğ Ğ’ ĞĞ‘Ğ©Ğ•Ğœ Ğ—ĞĞ§ĞĞ¢Ğ•")
print("=" * 80)

print("""
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ "42"

Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• FSM: waiting_for_place_overall

ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš: process_place_overall() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 900-933)

Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯:
1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ¸ÑĞ»Ğ° (Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ > 0)
2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² FSM state
3. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¼ĞµÑÑ‚Ğ° Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
4. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: waiting_for_place_age

Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ• Ğ‘ĞĞ¢Ğ£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµ Ğ¼ĞµÑÑ‚Ğ¾ Ğ² Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸  â”‚
â”‚ (Ñ‡Ğ¸ÑĞ»Ğ¾)                                     â”‚
â”‚ Ğ˜Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ" ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ    â”‚
â”‚ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [â­ï¸ ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ]  [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°]

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ¼ĞµÑÑ‚Ğ° Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
""")

print("=" * 80)
print("Ğ¨ĞĞ“ 5: Ğ’Ğ’ĞĞ” ĞœĞ•Ğ¡Ğ¢Ğ Ğ’ ĞšĞĞ¢Ğ•Ğ“ĞĞ Ğ˜Ğ˜")
print("=" * 80)

print("""
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ "8"

Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• FSM: waiting_for_place_age

ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš: process_place_age_category() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 936-969)

Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯:
1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ¸ÑĞ»Ğ° (Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ > 0)
2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² FSM state
3. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ¿ÑƒĞ»ÑŒÑĞ°
4. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: waiting_for_heart_rate

Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ• Ğ‘ĞĞ¢Ğ£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ Ğ·Ğ° ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ  â”‚
â”‚ (ÑƒĞ´/Ğ¼Ğ¸Ğ½)                                    â”‚
â”‚ Ğ˜Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ" ĞµÑĞ»Ğ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ    â”‚
â”‚ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [â­ï¸ ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ]  [âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ°]

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ¿ÑƒĞ»ÑŒÑĞ°
""")

print("=" * 80)
print("Ğ¨ĞĞ“ 6: Ğ’Ğ’ĞĞ” ĞŸĞ£Ğ›Ğ¬Ğ¡Ğ")
print("=" * 80)

print("""
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ "165"

Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• FSM: waiting_for_heart_rate

ĞĞ‘Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš: process_heart_rate() (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 972-1053)

Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯:
1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ (1-250 ÑƒĞ´/Ğ¼Ğ¸Ğ½)
2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² FSM state
3. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· state
4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ” Ñ‡ĞµÑ€ĞµĞ· add_competition_result()
5. ĞŸĞ¾ĞºĞ°Ğ· Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°

SQL Ğ—ĞĞŸĞ ĞĞ¡ (Ğ¸Ğ· competitions_queries.py):
    UPDATE competition_participants
    SET finish_time = '1:23:45.50',
        place_overall = 42,
        place_age_category = 8,
        heart_rate = 165,
        result_date = CURRENT_TIMESTAMP
    WHERE user_id = {user_id} AND competition_id = {comp_id}

Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ• Ğ‘ĞĞ¢Ğ£:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢ Ğ”ĞĞ‘ĞĞ’Ğ›Ğ•Ğ!                      â”‚
â”‚                                             â”‚
â”‚ ğŸ† ĞœĞ°Ñ€Ğ°Ñ„Ğ¾Ğ½ "Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ğ°Ñ Ğ¾ÑĞµĞ½ÑŒ"                 â”‚
â”‚ â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ: 1:23:45.50                        â”‚
â”‚ ğŸ† ĞœĞµÑÑ‚Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞµ: 42                          â”‚
â”‚ ğŸ… ĞœĞµÑÑ‚Ğ¾ Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸: 8                     â”‚
â”‚ â¤ï¸ Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ: 165 ÑƒĞ´/Ğ¼Ğ¸Ğ½                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ]

Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢: Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½ Ğ² Ğ‘Ğ” Ğ¸ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ñ‘Ğ½ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
""")

print("=" * 80)
print("Ğ˜Ğ¢ĞĞ“ĞĞ’ĞĞ¯ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞšĞĞ”Ğ")
print("=" * 80)

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ
import sys
from bot.fsm import CompetitionStates
from competitions import competitions_handlers
from competitions.competitions_queries import add_competition_result
import inspect

checks = []

# 1. FSM states
states = ['waiting_for_finish_time', 'waiting_for_place_overall',
          'waiting_for_place_age', 'waiting_for_heart_rate']
for state in states:
    checks.append(("FSM State: " + state, hasattr(CompetitionStates, state)))

# 2. Handlers
handlers = ['start_add_result', 'process_finish_time', 'process_place_overall',
            'process_place_age_category', 'process_heart_rate']
for handler in handlers:
    checks.append(("Handler: " + handler, hasattr(competitions_handlers, handler)))

# 3. add_competition_result parameters
sig = inspect.signature(add_competition_result)
params = list(sig.parameters.keys())
for param in ['heart_rate', 'place_overall', 'place_age_category']:
    checks.append(("Parameter: " + param, param in params))

# 4. view_my_competition check
source = inspect.getsource(competitions_handlers.view_my_competition)
checks.append(("Button check: is_finished", "is_finished" in source))
checks.append(("Button check: add_result", "comp:add_result:" in source))

all_ok = True
for check_name, result in checks:
    status = "[OK]" if result else "[FAIL]"
    print(f"  {status} {check_name}")
    if not result:
        all_ok = False

print("\n" + "=" * 80)
if all_ok:
    print("âœ… Ğ’Ğ¡Ğ• ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜ ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ«!")
    print("\nğŸ“‹ Ğ’Ğ«Ğ’ĞĞ”:")
    print("  â€¢ Ğ’ÑĞµ 4 ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ FSM ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‚")
    print("  â€¢ Ğ’ÑĞµ 5 Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹")
    print("  â€¢ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ²ÑĞµ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹")
    print("  â€¢ Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ğ¾ĞºĞ°Ğ·Ğ° ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ°")
    print("\nğŸ”„ WORKFLOW Ğ‘Ğ£Ğ”Ğ•Ğ¢ Ğ ĞĞ‘ĞĞ¢ĞĞ¢Ğ¬:")
    print("  1. ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑˆĞµĞ´ÑˆĞ¸Ñ… ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹")
    print("  2. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑÑ Ğ²Ñ€ĞµĞ¼Ñ (Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ ÑĞ¾Ñ‚Ñ‹Ñ…)")
    print("  3. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑÑ Ğ¼ĞµÑÑ‚Ğ¾ Ğ² Ğ¾Ğ±Ñ‰ĞµĞ¼ Ğ·Ğ°Ñ‡Ñ‘Ñ‚Ğµ")
    print("  4. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑÑ Ğ¼ĞµÑÑ‚Ğ¾ Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸")
    print("  5. Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑÑ Ğ¿ÑƒĞ»ÑŒÑ")
    print("  6. Ğ’ÑÑ‘ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ‘Ğ”")
    print("\nâš ï¸  Ğ’ĞĞ–ĞĞ: Ğ‘ĞĞ¢ Ğ”ĞĞ›Ğ–Ğ•Ğ Ğ‘Ğ«Ğ¢Ğ¬ ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ£Ğ©Ğ•Ğ!")
    print("  Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ: .\\restart.ps1")
else:
    print("âŒ ĞĞ‘ĞĞĞ Ğ£Ğ–Ğ•ĞĞ« ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ« Ğ’ ĞšĞĞ”Ğ•!")
    print("Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ")

print("=" * 80)
